<!DOCTYPE html>
<html lang="ko">
<head>
    <meta name="color-scheme" content="dark light">
    <meta charset="UTF-8">
    <meta name="robots" content="noindex, nofollow">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clock Info</title>
    
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Roboto+Mono:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: transparent;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .widget-container {
            position: relative;
            width: 225px;
            height: 120px;
            background: linear-gradient(180deg, rgba(224, 242, 254, 0.25) 0%, rgba(240, 249, 255, 0.15) 100%);
            backdrop-filter: blur(25px);
            border-radius: 24px;
            border: 1px solid rgba(224, 242, 254, 0.4);
            box-shadow: 0 8px 32px rgba(186, 230, 253, 0.15), inset 0 0 20px rgba(255, 255, 255, 0.2);
            display: flex;
            flex-direction: row;
            overflow: hidden;
            color: #334155;
        }

        .font-serif { font-family: 'Playfair Display', serif; }
        .font-mono { font-family: 'Roboto Mono', monospace; }
        .text-shadow-sm { text-shadow: 0 1px 2px rgba(0,0,0,0.1); }
    </style>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        sky: { 200: '#bae6fd', 300: '#7dd3fc', custom: '#7dd3fc' },
                        purple: { 200: '#e9d5ff', 300: '#d8b4fe', custom: '#c4b5fd' },
                        slate: { 400: '#94a3b8', 700: '#334155', 800: '#1e293b' },
                        yellow: { 200: '#fef08a' }
                    }
                }
            }
        }
    </script>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect } = React;

        const ClockMoon = ({ className, color }) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/></svg>;
        const ClockSun = ({ className, color }) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41-1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg>;
        const ClockCloudSun = ({ className, color }) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 2v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="M20 12h2"/><path d="m19.07 4.93-1.41 1.41"/><path d="M15.947 12.65a4 4 0 0 0-5.925-4.128"/><path d="M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z"/></svg>;
        const ClockSparkles = ({ className, color }) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/></svg>;
        
        const Sun = ({ className, color }) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>;
        const Cloud = ({ className, color }) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"></path></svg>;
        const CloudRain = ({ className, color }) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="16" y1="13" x2="16" y2="21"></line><line x1="8" y1="13" x2="8" y2="21"></line><line x1="12" y1="15" x2="12" y2="23"></line><path d="M20 16.58A5 5 0 0 0 18 7h-1.26A8 8 0 1 0 4 15.25"></path></svg>;
        const CloudSnow = ({ className, color }) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"/><path d="M8 15h.01"/><path d="M8 19h.01"/><path d="M12 17h.01"/><path d="M12 21h.01"/><path d="M16 15h.01"/><path d="M16 19h.01"/></svg>;
        const CloudLightning = ({ className, color }) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973"/><path d="m13 12-3 5h4l-3 5"/></svg>;

        const FaceHappy = ({ color, className, strokeWidth }) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke={color} strokeWidth={strokeWidth} strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><path d="M8 14s1.5 2 4 2 4-2 4-2"/><line x1="9" y1="9" x2="9.01" y2="9"/><line x1="15" y1="9" x2="15.01" y2="9"/></svg>;
        const FaceNormal = ({ color, className, strokeWidth }) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke={color} strokeWidth={strokeWidth} strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><path d="M8 14s1.5 1.5 4 1.5 4-1.5 4-1.5"/><line x1="9" y1="9" x2="9.01" y2="9"/><line x1="15" y1="9" x2="15.01" y2="9"/></svg>;
        const FaceBad = ({ color, className, strokeWidth }) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke={color} strokeWidth={strokeWidth} strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><path d="M9 15s1.5-1 3-1 3 1 3 1"/><line x1="9" y1="9" x2="9.01" y2="9"/><line x1="15" y1="9" x2="15.01" y2="9"/><path d="M8 7 L10 9"/><path d="M16 7 L14 9"/></svg>;
        const FaceDevil = ({ color, className, strokeWidth }) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke={color} strokeWidth={strokeWidth} strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><path d="M9 15s1.5-1 3-1 3 1 3 1"/><path d="M8 8l-2-2"/><path d="M16 8l2-2"/><line x1="9" y1="10" x2="9.01" y2="10"/><line x1="15" y1="10" x2="15.01" y2="10"/></svg>;
        const GasMask = ({ color, className, strokeWidth }) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke={color} strokeWidth={strokeWidth} strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="9"/><circle cx="9" cy="10" r="2.5"/><circle cx="15" cy="10" r="2.5"/><path d="M12 14v3"/><rect x="10" y="17" width="4" height="3" rx="1"/></svg>;

        const ClockSection = () => {
            const [time, setTime] = useState(new Date());

            useEffect(() => {
                const timer = setInterval(() => setTime(new Date()), 1000);
                return () => clearInterval(timer);
            }, []);

            const hours = time.getHours();
            const minutes = time.getMinutes();
            const totalMinutes = hours * 60 + minutes;
            const degrees = totalMinutes * 0.25;

            return (
                /* [수정] 너비가 좁아졌으므로 pl-4 삭제하고 justify-center로 중앙 정렬 추천 */
                <div className="relative w-full h-full flex items-center justify-center select-none overflow-hidden">
                    <div className="relative w-[90px] h-[90px] rounded-full flex-shrink-0"
                         style={{
                             background: `conic-gradient(
     rgba(148, 163, 184, 0.3) 0deg 90deg,   
     rgba(216, 180, 254, 0.3) 90deg 180deg, 
     rgba(125, 211, 252, 0.3) 180deg 270deg, 
     rgba(254, 240, 138, 0.3) 270deg 360deg 
 )`,
                             border: '1px solid rgba(255,255,255,0.6)',
                             boxShadow: 'none' 
                         }}>
                         
                         <div className="absolute top-0 left-1/2 w-[1px] h-full bg-white/40 transform -translate-x-1/2"></div>
                         <div className="absolute top-1/2 left-0 w-full h-[1px] bg-white/40 transform -translate-y-1/2"></div>

                        <div className="absolute top-0.5 left-1/2 transform -translate-x-1/2 font-mono text-[10px] font-bold text-slate-300 opacity-90 z-20">24</div>
                        <div className="absolute top-1/2 right-1 transform -translate-y-1/2 font-mono text-[10px] font-bold text-purple-300 opacity-90 z-20">6</div>
                        <div className="absolute bottom-0.5 left-1/2 transform -translate-x-1/2 font-mono text-[10px] font-bold text-sky-300 opacity-90 z-20">12</div>
                        <div className="absolute top-1/2 left-1 transform -translate-y-1/2 font-mono text-[10px] font-bold text-yellow-200 opacity-90 z-20">18</div>

                        {/* [수정] 달(Moon)은 회색(#94a3b8), 반짝임(Sparkles)은 연노랑(#fdf4ce)으로 교체 */}
                        <div className="absolute top-[20%] right-[20%] opacity-80"><ClockMoon className="w-3.5 h-3.5" color="#94a3b8" /></div>
                        <div className="absolute bottom-[20%] right-[20%] opacity-80"><ClockSun className="w-3.5 h-3.5" color="#d8b4fe" /></div>
                        <div className="absolute bottom-[20%] left-[20%] opacity-80"><ClockCloudSun className="w-3.5 h-3.5" color="#7dd3fc" /></div>
                        <div className="absolute top-[20%] left-[20%] opacity-80"><ClockSparkles className="w-3.5 h-3.5" color="#fdf4ce" /></div>

                         <div className="absolute top-1/2 left-1/2 w-2 h-2 bg-white border border-slate-200 rounded-full transform -translate-x-1/2 -translate-y-1/2 z-10 shadow-sm"></div>

                         <div className="absolute top-0 left-0 w-full h-full"
                              style={{ 
                                  transform: `rotate(${degrees}deg)`,
                                  transition: 'transform 1s cubic-bezier(0.4, 2.08, 0.55, 0.44)'
                              }}>
                             <div className="absolute top-[10%] left-1/2 w-[3px] h-[40%] bg-white border border-slate-100 rounded-full transform -translate-x-1/2 shadow-sm"></div>
                         </div>
                    </div>
                </div>
            );
        };

        const InfoSection = () => {
            const [time, setTime] = useState(new Date());
            const [weather, setWeather] = useState({ temp: '--', code: 0 });
            const [dust, setDust] = useState({ aqi: 0, status: '…' });
            
            const WAQI_TOKEN = "724216be2f8a00c8b378a9cde2a8744e669d11d7"; 
            const LAT = 37.5015609; 
            const LON = 126.7690559;

            useEffect(() => {
                const timer = setInterval(() => setTime(new Date()), 1000);
                return () => clearInterval(timer);
            }, []);

            useEffect(() => {
                const fetchData = async () => {
                    try {
                        const wRes = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${LAT}&longitude=${LON}&current_weather=true`);
                        const wData = await wRes.json();
                        setWeather({
                            temp: Math.round(wData.current_weather.temperature),
                            code: wData.current_weather.weathercode
                        });

                        const dRes = await fetch(`https://api.waqi.info/feed/geo:${LAT};${LON}/?token=${WAQI_TOKEN}`);
                        const dData = await dRes.json();
                        if (dData.status === 'ok') {
                            setDust({
                                aqi: dData.data.aqi,
                                status: getDustStatus(dData.data.aqi)
                            });
                        }
                    } catch (e) { console.error(e); }
                };
                fetchData();
                const interval = setInterval(fetchData, 600000);
                return () => clearInterval(interval);
            }, []);

            const getDustStatus = (aqi) => {
                if (aqi <= 50) return '좋음';
                if (aqi <= 100) return '보통';
                if (aqi <= 150) return '나쁨';
                if (aqi <= 250) return '매우나쁨';
                return '최악'; 
            };

            const getDustColor = (aqi) => {
                if (aqi <= 50) return '#d8b4fe';
                if (aqi <= 100) return '#7dd3fc';
                return '#94a3b8';
            };

            // [수정] 아이콘 크기 더 축소: w-5 -> w-4 (16px)
            const getDustIcon = (aqi, color) => {
                const className = "w-4 h-4"; 
                const props = { color, className, strokeWidth: "2" };
                
                if (aqi <= 50) return <FaceHappy {...props} />;
                if (aqi <= 100) return <FaceNormal {...props} />;
                if (aqi <= 150) return <FaceBad {...props} />;
                if (aqi <= 250) return <FaceDevil {...props} />;
                return <GasMask {...props} />;
            };

            const getWeatherColor = (code) => {
                if (code === 0) return '#d8b4fe'; // 맑음: 연보라
                if (code <= 3) return '#7dd3fc';  // 구름/흐림: 스카이블루
                if (code >= 71) return '#94a3b8'; // 눈/천둥번개: 회색
                return '#fef08a';                 // 비/안개/이슬비: 연노랑
            };

            // [수정] 아이콘 크기 더 축소: w-5 -> w-4 (16px)
            const getWeatherIcon = (code, color) => {
                const className = "w-4 h-4"; 
                const props = { color, className };

                if (code === 0) return <Sun {...props} />;
                if (code <= 3) return <Cloud {...props} />;
                if (code <= 48) return <CloudRain {...props} />;
                if (code >= 71 && code <= 77) return <CloudSnow {...props} />;
                if (code >= 85 && code <= 86) return <CloudSnow {...props} />;
                if (code >= 95) return <CloudLightning {...props} />;
                return <CloudRain {...props} />;
            };

            const month = String(time.getMonth() + 1).padStart(2, '0');
            const day = String(time.getDate()).padStart(2, '0');
            const weekday = time.toLocaleDateString('en-US', { weekday: 'short' }).toUpperCase();
            
            // 날짜 표시 형식: MM/DD
            const dateOnly = `${month}/${day}`;
            const timeStr = time.toLocaleTimeString('ko-KR', { hour12: false, hour: '2-digit', minute: '2-digit' });
            
            const dustColor = getDustColor(dust.aqi);
            const weatherColor = getWeatherColor(weather.code);

            return (
                <div className="flex flex-col flex-1 h-full select-none overflow-hidden">
                    <div className="flex-1 w-full flex flex-col items-center justify-center pt-1"
                         style={{ 
                             background: 'rgba(255, 255, 255, 0.1)', 
                             borderBottom: '1px solid rgba(255, 255, 255, 0.4)' 
                         }}>

                        {/* [수정] 폰트 크기 축소: 시간 34px->28px, 날짜 12px->11px */}
                        <div className="font-mono text-[28px] font-bold text-[#7dd3fc] leading-none tracking-tighter drop-shadow-sm mb-1">
                            {timeStr}
                        </div>

                        <div className="flex flex-row items-baseline justify-center gap-1.5 opacity-90">
                            <span className="font-sans text-[11px] font-bold text-white tracking-wide leading-tight">
                                {dateOnly}
                            </span>
                            <span className="font-sans text-[10px] font-bold text-white tracking-widest leading-tight">
                                {weekday}
                            </span>
                        </div>
                    </div>
                        
                    {/* [수정] gap-2 -> gap-1로 간격 추가 축소 */}
                    <div className="h-[36px] w-full flex flex-row items-center justify-center gap-0.5"
                        style={{ background: 'rgba(255, 255, 255, 0.05)' }}> 
                        <div className="flex flex-row items-center gap-1">
                            {getWeatherIcon(weather.code, weatherColor)}
                            <span className="font-mono text-xs font-bold pt-0.5" style={{ color: weatherColor }}>
                                {weather.temp}°
                            </span>
                        </div>
                        
                        <div className="flex flex-row items-center gap-1">
                            {getDustIcon(dust.aqi, dustColor)}
                            <span className="font-sans text-[10px] font-bold pt-0.5" style={{ color: dustColor }}>
                                {dust.status}
                            </span>
                        </div>
                    </div>
                </div>
            );
        };

        const App = () => {
            return (
                <div className="widget-container">
                    {/* [수정] 너비 재분배 (총합 250px 유지) */}
                    {/* 왼쪽: 아날로그 시계 (100px -> 110px로 확장하여 좌우 여백 확보) */}
                    <div className="w-[110px] h-full flex-shrink-0">
                        <ClockSection />
                    </div>
                    
                    {/* w-[140px]를 flex-1로 변경하여 남은 공간(115px)을 자동 채움 */}
                    <div className="flex-1 h-full flex-shrink-0" style={{ borderLeft: '1px solid rgba(255,255,255,0.4)' }}>
                        <InfoSection />
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

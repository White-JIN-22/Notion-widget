<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="robots" content="noindex, nofollow">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Fortress Satellite</title>
    
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&family=Playfair+Display:wght@400;600;700&family=Roboto+Mono:wght@400;500;700&display=swap');

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: transparent;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            overflow-x: hidden;
            color: #334155;
            -webkit-tap-highlight-color: transparent;
        }

        .font-serif { font-family: 'Playfair Display', serif; }
        .font-mono { font-family: 'Roboto Mono', monospace; }

        /* Fortress Glass Style */
        .widget-container {
    /* [ÏàòÏ†ï] 2/3 ÌÅ¨Í∏∞Î°ú Ï∂ïÏÜå (PC ÏúÑÏ†ØÍ≥º ÎπÑÏä∑Ìïú ÎÇ†Ïî¨Ìïú ÎπÑÏú®) */
    width: 100%;
    max-width: 280px; 

    /* [ÏàòÏ†ï] ÎÜíÏù¥ 'Í≥†Ï†ï' (ÌÉ≠ Ï†ÑÌôò Ïãú ÍøÄÎ†ÅÍ±∞Î¶º Î∞©ÏßÄ) */
    height: 600px;
    min-height: 600px;

    /* ÌïòÎã® Ïó¨Î∞± Îì± ÎÇòÎ®∏ÏßÄ ÎîîÏûêÏù∏ Ïú†ÏßÄ */
    padding-bottom: 20px;
    background: rgba(255, 255, 255, 0.25);
    backdrop-filter: blur(25px);
    display: flex;
    flex-direction: column;

    border: 1px solid rgba(255, 255, 255, 0.4);
    border-radius: 28px;
    box-shadow: 0 0 40px rgba(186, 230, 253, 0.15);
    overflow: hidden;
}

/* [Ï∂îÍ∞Ä] index.htmlÍ≥º ÎèôÏùºÌïú ÎÖ∏ÎûÄÏÉâ */
.text-yellow-100 { color: #fef9c3; }

        .header-section {
            /* [ÏàòÏ†ï] Ïó¨Î∞± Ï∂ïÏÜå */
            padding: 16px 20px 12px 20px;
            background: rgba(255, 255, 255, 0.1);
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(5px);
        }

        .glass-panel {
            background: rgba(255, 255, 255, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.5);
            border-radius: 20px;
            box-shadow: 0 4px 20px rgba(186, 230, 253, 0.1);
        }

        .tab-btn {
            transition: all 0.2s;
            border-radius: 12px;
            font-weight: 700;
            font-size: 0.85rem;
            color: #94a3b8;
            padding: 8px 0; /* [ÏàòÏ†ï] Ïó¨Î∞± Ï∂ïÏÜå */
        }
        .tab-active {
            background: rgba(255, 255, 255, 0.5);
            color: #7dd3fc;
            border: 1px solid rgba(125, 211, 252, 0.3);
            box-shadow: 0 2px 10px rgba(186, 230, 253, 0.2);
        }

        .quest-btn {
            background: rgba(255, 255, 255, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.4);
            color: #475569;
            transition: all 0.1s;
        }
        .quest-btn:active {
            transform: scale(0.96);
            background: rgba(255, 255, 255, 0.6);
        }

        /* Modal */
        .modal-overlay { background: rgba(0, 0, 0, 0.3); backdrop-filter: blur(4px); }
        .modal-content {
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.98) 0%, rgba(240, 249, 255, 0.95) 100%);
            border-top: 1px solid rgba(255, 255, 255, 0.8);
            border-radius: 24px 24px 0 0;
            box-shadow: 0 -10px 40px rgba(14, 165, 233, 0.15);
        }

        .custom-select {
            width: 100%; border-radius: 12px; padding: 10px;
            font-weight: 700; outline: none; text-align: center; appearance: none;
            background: rgba(241, 245, 249, 0.8);
            border: 1px solid rgba(203, 213, 225, 0.5);
            color: #334155; font-size: 1rem;
        }

        .progress-ring__circle {
            transition: stroke-dashoffset 0.35s;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }

        .toast-message {
            position: fixed; bottom: 40px; left: 50%; transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(125, 211, 252, 0.4); 
            color: #0ea5e9;
            padding: 8px 16px; border-radius: 20px;
            font-size: 0.85rem; font-weight: 700;
            box-shadow: 0 4px 15px rgba(14, 165, 233, 0.15);
            z-index: 100;
            animation: fadeUp 0.3s ease-out forwards; white-space: nowrap;
        }
        @keyframes fadeUp { from { opacity: 0; transform: translate(-50%, 10px); } to { opacity: 1; transform: translate(-50%, 0); } }

        /* Colors */
        .text-bright { color: #ffffff; } /* [ÏàòÏ†ï] Ï†úÎ™© Ìù∞ÏÉâ */
        .text-sky-300 { color: #38bdf8; }
        .text-purple-300 { color: #c084fc; }
        .text-slate-400 { color: #94a3b8; }
        .text-yellow-custom { color: #fde047; } /* Î∞ùÏùÄ ÎÖ∏ÎûÄÏÉâ */
    </style>
</head>
<body>
    <div id="root" class="w-full"></div>
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // ‚ö†Ô∏è [ÏÑ§Ï†ï] Î≥∏Ïù∏Ïùò Cloudflare Worker Ï£ºÏÜå ÏûÖÎ†•
        const WORKER_URL = "YOUR_WORKER_URL_HERE";

        const Icons = {
            Sun: ({className}) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>,
            Moon: ({className}) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>,
            Cloud: ({className}) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"></path></svg>,
            Rain: ({className}) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="16" y1="13" x2="16" y2="21"></line><line x1="8" y1="13" x2="8" y2="21"></line><line x1="12" y1="15" x2="12" y2="23"></line><path d="M20 16.58A5 5 0 0 0 18 7h-1.26A8 8 0 1 0 4 15.25"></path></svg>,
            Play: ({className}) => <svg className={className} viewBox="0 0 24 24" fill="currentColor" stroke="none"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>,
            Stop: ({className}) => <svg className={className} viewBox="0 0 24 24" fill="currentColor" stroke="none"><rect x="6" y="6" width="12" height="12" rx="2" ry="2"></rect></svg>,
            Flame: ({className}) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.1.2-2.2.6-3.3a7 7 0 0 0 3 3.3z"></path></svg>,
            Droplets: ({className}) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"></path></svg>,
            Utensils: ({className}) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"></path><path d="M7 2v20"></path><path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3zm0 0v7"></path></svg>,
            Recycle: ({className}) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path></svg>,
            Wind: ({className}) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M9.59 4.59A2 2 0 1 1 11 8H2m10.59 11.41A2 2 0 1 0 14 16H2m15.73-8.27A2.5 2.5 0 1 1 19.5 12H2"></path></svg>,
            Shirt: ({className}) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M20.38 3.4a2 2 0 0 0-2-2h-12.76a2 2 0 0 0-2 2l-.22 2.6a2 2 0 0 0 1.99 2.2h13.22a2 2 0 0 0 1.99-2.2l-.22-2.6z"></path><path d="M9 2v4"></path><path d="M15 2v4"></path><path d="M20 10v12H4V10"></path></svg>,
            Book: ({className}) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg>,
            Zzz: ({className}) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M2 4h20"></path><path d="M2 20h20"></path><path d="M6 12h12"></path></svg>,
            Waves: ({className}) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1"></path><path d="M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1"></path><path d="M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1"></path></svg>,
            Leaf: ({className}) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.5 2 6 0 5.5-4.5 10-10 10z"></path><path d="M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12"></path></svg>,
            Home: ({className}) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>,
            Pen: ({className}) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 19l7-7 3 3-7 7-3-3z"></path><path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"></path><path d="M2 2l5.5 5.5"></path><path d="M11 11l5.5 5.5"></path></svg>,
            Cup: ({className}) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 8h1a4 4 0 0 1 0 8h-1"></path><path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"></path><line x1="6" y1="1" x2="6" y2="4"></line><line x1="10" y1="1" x2="10" y2="4"></line><line x1="14" y1="1" x2="14" y2="4"></line></svg>,
            Pill: ({className}) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="7" width="18" height="10" rx="5" ry="5"></rect><line x1="12" y1="7" x2="12" y2="17"></line></svg>,
            Pot: ({className}) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M2 12h20"></path><path d="M20 12v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-8"></path><path d="M4 12V7a4 4 0 0 1 4-4h8a4 4 0 0 1 4 4v5"></path><path d="M12 3v-1"></path></svg>,
            Stretch: ({className}) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="5" r="1"></circle><path d="M12 20V6"></path><path d="M5 8l7-2 7 2"></path><path d="M8 20l4-9 4 9"></path></svg>,
        };

        const App = () => {
            const [activeTab, setActiveTab] = useState('flow');
            const [toast, setToast] = useState(null);
            
            // Timer State (Flow)
            const [isRecording, setIsRecording] = useState(false);
            const [startTime, setStartTime] = useState(null);
            const [elapsed, setElapsed] = useState(0);

            // Modal State
            const [showModal, setShowModal] = useState(false);
            const [modalType, setModalType] = useState('none');
            const [pendingItem, setPendingItem] = useState(null);

            // Inputs
            const [durHour, setDurHour] = useState(0);
            const [durMin, setDurMin] = useState(30);
            const [timeHour, setTimeHour] = useState(7);
            const [timeMin, setTimeMin] = useState(0);
            const [memo, setMemo] = useState('');

            // Data Lists
            const switchQuests = [
                { id: 'r_exercise', name: 'Ïö¥Îèô', icon: 'Flame', color: 'text-purple-300' },
                { id: 'q_cook', name: 'ÏöîÎ¶¨', icon: 'Pot', color: 'text-purple-300' }, 
                { id: 'r1', name: 'ÎèÖÏÑú', icon: 'Book', color: 'text-purple-300' }, 
                { id: 'q_hygiene', name: 'ÏúÑÏÉùÍ¥ÄÎ¶¨', icon: 'Droplets', color: 'text-sky-300' },
                { id: 'q3', name: 'ÏÑ§Í±∞ÏßÄ', icon: 'Waves', color: 'text-sky-300' }, 
                { id: 'q4', name: 'Îπ®Îûò', icon: 'Shirt', color: 'text-sky-300' }, 
                { id: 'q_pill', name: 'ÏïåÏïΩ ÏÜåÎ∂Ñ', icon: 'Pill', color: 'text-sky-300' },
                { id: 'q5', name: 'Î∂ÑÎ¶¨ÏàòÍ±∞', icon: 'Recycle', color: 'text-slate-400' }, 
                { id: 'q6', name: 'Î∞© Ïì∏Í∏∞', icon: 'Wind', color: 'text-slate-400' }, 
                { id: 'q7', name: 'ÏßëÏïàÏùº', icon: 'Home', color: 'text-slate-400' }, 
            ];

            const restOptions = [
                { id: 'q2_moved', name: 'ÏãùÏÇ¨', icon: 'Utensils', color: 'text-purple-300' }, 
                { id: 'q_tea', name: 'Ìã∞ÌÉÄÏûÑ', icon: 'Cup', color: 'text-purple-300' }, 
                { id: 'r_stretch', name: 'Ïä§Ìä∏Î†àÏπ≠', icon: 'Stretch', color: 'text-purple-300' }, 
                { id: 'r_record', name: 'Í∏∞Î°ù', icon: 'Pen', color: 'text-sky-300' }, 
                { id: 'r_counseling', name: 'ÏÉÅÎã¥', icon: 'Leaf', color: 'text-sky-300' }, 
                { id: 'r2', name: 'ÎÇÆÏû†', icon: 'Zzz', color: 'text-slate-400' }, 
                // [Ï∂îÍ∞Ä] Îî• Ïä¨Î¶Ω
                { id: 'r4', name: 'Îî• Ïä¨Î¶Ω', icon: 'Moon', color: 'text-slate-400' },
            ];

            const MODAL_TARGETS = ['r_exercise', 'r1', 'r_record', 'r_counseling', 'r2', 'r4'];

            useEffect(() => {
                let interval = null;
                if (isRecording) {
                    interval = setInterval(() => {
                        setElapsed(Math.floor((Date.now() - startTime) / 1000));
                    }, 1000);
                }
                return () => clearInterval(interval);
            }, [isRecording, startTime]);

            useEffect(() => {
                if (toast) {
                    const timer = setTimeout(() => setToast(null), 2500);
                    return () => clearTimeout(timer);
                }
            }, [toast]);

            const triggerToast = (msg) => setToast(msg);

            const sendSignal = async (payload) => {
                if (!WORKER_URL || WORKER_URL.includes("YOUR_")) {
                    triggerToast("‚ö†Ô∏è Worker URL ÎØ∏ÏÑ§Ï†ï");
                    return;
                }
                payload.timestamp = new Date().toISOString();
                try {
                    fetch(WORKER_URL, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    if (payload.wakeUpTime) triggerToast(`‚òÄÔ∏è Í∏∞ÏÉÅ ${payload.wakeUpTime} Ï†ÑÏÜ°`);
                    else if (payload.bedTime) triggerToast(`üåô Ï∑®Ïπ® ${payload.bedTime} Ï†ÑÏÜ°`);
                    else triggerToast("üì° Ïã†Ìò∏ Ï†ÑÏÜ° ÏôÑÎ£å");
                } catch (e) {
                    triggerToast("‚ùå Ï†ÑÏÜ° Ïã§Ìå®");
                }
            };

            const toggleTimer = () => {
                if (!isRecording) {
                    setIsRecording(true);
                    setStartTime(Date.now());
                    setElapsed(0);
                } else {
                    setIsRecording(false);
                    if (elapsed < 180) {
                        triggerToast("‚ùÑÔ∏è Ï†êÌôî Ïã§Ìå® (Í∏∞Î°ù X)");
                        setElapsed(0);
                        return;
                    }
                    setModalType('flow-end');
                    setShowModal(true);
                }
            };

            const handleFlowEnd = (weather) => {
                const duration = Math.ceil(elapsed / 60);
                sendSignal({
                    type: 'Focus',
                    tag: 'Flow State',
                    duration: duration,
                    note: memo || "Mobile Focus",
                    quality: weather
                });
                setShowModal(false);
                setMemo('');
                setElapsed(0);
            };

            const handleItemClick = (item, type) => {
                if (MODAL_TARGETS.includes(item.id)) {
                    setPendingItem({ ...item, type });
                    setDurHour(0);
                    setDurMin(30);
                    setModalType('time');
                    setShowModal(true);
                } else {
                    sendSignal({
                        type: type,
                        tag: item.name,
                        duration: 15,
                        note: "Quick Log"
                    });
                }
            };

            const handleManualSave = () => {
                const duration = (durHour * 60) + durMin;
                sendSignal({
                    type: pendingItem.type,
                    tag: pendingItem.name,
                    duration: duration,
                    note: "Manual Log"
                });
                setShowModal(false);
            };

            const handleWakeUp = () => {
                const now = new Date();
                setTimeHour(now.getHours());
                setTimeMin(Math.floor(now.getMinutes() / 5) * 5);
                setModalType('wakeup');
                setShowModal(true);
            };

            const handleBedTime = () => {
                const now = new Date();
                setTimeHour(now.getHours());
                setTimeMin(Math.floor(now.getMinutes() / 5) * 5);
                setModalType('bedtime');
                setShowModal(true);
            };

            const confirmTime = (mode) => {
                const timeStr = `${String(timeHour).padStart(2,'0')}:${String(timeMin).padStart(2,'0')}`;
                if (mode === 'wakeup') sendSignal({ wakeUpTime: timeStr });
                if (mode === 'bedtime') sendSignal({ bedTime: timeStr });
                setShowModal(false);
            };

            const renderIcon = (name, className) => {
                const Icon = Icons[name] || Icons.Sun;
                return <Icon className={className} />;
            };

            // [ÏàòÏ†ï] Timer Text Logic (ReadyÏùº Îïå 3:00 ÌëúÏãú)
            const formatStopwatch = (sec) => {
                if (sec < 180) {
                    const remaining = 180 - sec;
                    const m = Math.floor(remaining / 60);
                    const s = remaining % 60;
                    return `${m}:${String(s).padStart(2, '0')}`;
                } else {
                    const extended = sec - 180;
                    const h = Math.floor(extended / 3600);
                    const m = Math.floor((extended % 3600) / 60);
                    const s = extended % 60;
                    return `+${h > 0 ? h + ':' : ''}${String(m).padStart(2, '0')}:${String(s).padStart(2, '0')}`;
                }
            };

            const radius = 60; 
            const circumference = 2 * Math.PI * radius;
            const progress = elapsed < 180 ? Math.max(0, (180 - elapsed) / 180) : 1;
            const dashoffset = circumference - (progress * circumference);
            const strokeColor = elapsed < 180 ? "#7dd3fc" : "#ffffff";

            return (
                <div className="widget-container">
                    {toast && <div className="toast-message">{toast}</div>}

                    {/* Header */}
                    <div className="header-section flex justify-between items-center">
                        {/* [ÏàòÏ†ï] Ï†úÎ™©: Ìù∞ÏÉâ, Í∏∞Ïö∏ÏûÑ Ï†úÍ±∞ */}
                        <h1 className="text-xl font-bold font-serif text-white tracking-tight">Daily Log</h1>
                       <div className="flex gap-2">
    {/* [ÏàòÏ†ï] ÏïÑÏù¥ÏΩò: index.htmlÍ≥º ÎèôÏùºÌïú Ïó∞Ìïú ÎÖ∏ÎûÄÏÉâ (text-yellow-100) */}
    <button onClick={handleWakeUp} className="w-8 h-8 rounded-xl bg-white/10 border border-white/20 flex items-center justify-center text-yellow-100 shadow-sm active:scale-95 transition-transform hover:bg-white/20">
        <Icons.Sun className="w-4 h-4" />
    </button>
    <button onClick={handleBedTime} className="w-8 h-8 rounded-xl bg-white/10 border border-white/20 flex items-center justify-center text-yellow-100 shadow-sm active:scale-95 transition-transform hover:bg-white/20">
        <Icons.Moon className="w-4 h-4" />
    </button>
</div>
                    </div>

                    {/* Tabs (Ïó¨Î∞± Ï∂ïÏÜå) */}
                    <div className="flex px-3 py-2 gap-2">
                        {['flow', 'switch', 'rest'].map(tab => {
    const isActive = activeTab === tab;
    const labels = { flow: '‡ºö‚úßFlow‚úß‡ºö', switch: '‡ºö‚úßSwitch‚úß‡ºö', rest: '‡ºö‚úßRest‚úß‡ºö' };
    
    // [ÎîîÏûêÏù∏] SwitchÎäî Î≥¥ÎùºÏÉâ, ÎÇòÎ®∏ÏßÄÎäî ÌïòÎäòÏÉâ / ÌôúÏÑ± ÏÉÅÌÉúÏùº Îïå Î∞∞Í≤Ω Î∂àÌà¨Î™ÖÎèÑ Ï¶ùÍ∞Ä
    let colorClass = "";
    if (isActive) {
        // [ÏàòÏ†ï] Î∞∞Í≤Ω Ìà¨Î™ÖÎèÑ 60% -> 20%Î°ú ÌïòÌñ• Ï°∞Ï†ï (Í∏ÄÏûêÍ∞Ä Îçî Ïûò Î≥¥ÏûÑ)
if (tab === 'switch') colorClass = "bg-white/20 text-purple-300 border border-purple-300/30 shadow-sm backdrop-blur-md";
else colorClass = "bg-white/20 text-sky-300 border border-sky-300/30 shadow-sm backdrop-blur-md";
    } else {
        colorClass = "hover:bg-white/20 text-slate-400";
    }

    return (
        <button 
            key={tab}
            onClick={() => setActiveTab(tab)}
            className={`flex-1 tab-btn border border-transparent ${colorClass}`}
        >
            {labels[tab]}
        </button>
    );
})}
                    </div>

                    {/* Content Area (Ï¢ÅÏïÑÏßÑ Ìè≠Ïóê ÎßûÏ∂∞ Ïó¨Î∞± p-3 -> p-2 Ï∂ïÏÜå) */}
                <div className="flex-1 p-2 flex flex-col items-center overflow-y-auto w-full">

                    {/* 1. FLOW TAB */}
                    {activeTab === 'flow' && (
                        <div className="w-full flex flex-col items-center justify-center pt-10 h-full">
                            <div className="relative w-40 h-40 flex items-center justify-center mb-6">
                                <svg className="absolute w-full h-full transform -rotate-90" viewBox="0 0 140 140">
                                    <circle stroke="rgba(255,255,255,0.3)" strokeWidth="8" fill="transparent" r={radius} cx="70" cy="70" />
                                    <circle 
                                        className="progress-ring__circle"
                                        stroke={strokeColor}
                                        strokeWidth="8"
                                        fill="transparent"
                                        r={radius} cx="70" cy="70"
                                        style={{ strokeDasharray: `${circumference} ${circumference}`, strokeDashoffset: dashoffset, strokeLinecap: "round" }}
                                    />
                                </svg>
                                <div className="flex flex-col items-center z-10">
                                    <span className={`text-3xl font-mono font-bold tracking-tighter ${isRecording ? (elapsed < 180 ? 'text-sky-500' : 'text-slate-600') : 'text-slate-400'}`}>
                                        {isRecording ? formatStopwatch(elapsed) : "3:00"}
                                    </span>
                                    <span className="text-[10px] font-bold text-slate-400 mt-1 uppercase tracking-widest">
                                        {isRecording ? (elapsed < 180 ? "Ignition" : "Flowing") : "Ready"}
                                    </span>
                                </div>
                            </div>

                            <button 
                                onClick={toggleTimer}
                                className={`w-16 h-16 rounded-full flex items-center justify-center shadow-lg transition-all active:scale-95 ${isRecording ? 'bg-sky-400 text-white' : 'bg-white text-sky-400 border-2 border-sky-100'}`}
                            >
                                {isRecording ? <Icons.Stop className="w-7 h-7" /> : <Icons.Play className="w-7 h-7 ml-1" />}
                            </button>
                        </div>
                    )}

                    {/* 2. SWITCH TAB (Í∞ÑÍ≤© gap-2 -> gap-1.5 Î°ú Ï∂ïÏÜå) */}
                    {activeTab === 'switch' && (
                        <div className="w-full grid grid-cols-3 gap-1.5 content-start">
                            {switchQuests.map(item => {
                                const isSpecial = ['r_exercise', 'r1'].includes(item.id);
                                const bgClass = isSpecial 
                                    ? "bg-white/20 border-white/30 hover:bg-white/30" 
                                    : "bg-white/5 border-white/10 hover:bg-white/10";

                                return (
                                    <button 
                                        key={item.id} 
                                        onClick={() => handleItemClick(item, 'Switch')}
                                        className={`${bgClass} w-full aspect-square rounded-2xl flex flex-col items-center justify-center gap-1 transition-all active:scale-95 border`}
                                    >
                                        {renderIcon(item.icon, `w-5 h-5 ${item.color}`)}
                                        <span className="text-[11px] font-bold text-white tracking-tight">{item.name}</span>
                                    </button>
                                );
                            })}
                        </div>
                    )}

                    {/* 3. REST TAB (Í∞ÑÍ≤© gap-2 -> gap-1.5 Î°ú Ï∂ïÏÜå) */}
                    {activeTab === 'rest' && (
                        <div className="w-full grid grid-cols-3 gap-1.5 content-start">
                            {restOptions.map(item => {
                                const isSpecial = ['r_record', 'r_counseling', 'r2', 'r4'].includes(item.id);
                                const bgClass = isSpecial 
                                    ? "bg-white/20 border-white/30 hover:bg-white/30" 
                                    : "bg-white/5 border-white/10 hover:bg-white/10";

                                return (
                                    <button 
                                        key={item.id} 
                                        onClick={() => handleItemClick(item, 'Rest')}
                                        className={`${bgClass} w-full aspect-square rounded-2xl flex flex-col items-center justify-center gap-1 transition-all active:scale-95 border`}
                                    >
                                        {renderIcon(item.icon, `w-5 h-5 ${item.color}`)}
                                        <span className="text-[11px] font-bold text-white tracking-tight">{item.name}</span>
                                    </button>
                                );
                            })}
                        </div>
                    )}
                </div>

                    {/* MODALS */}
                    {showModal && (
                        <div className="fixed inset-0 modal-overlay z-50 flex items-end justify-center" onClick={() => setShowModal(false)}>
                            <div className="w-full modal-content p-6 pb-10" onClick={e => e.stopPropagation()}>
                                
                                {modalType === 'time' && pendingItem && (
                                    <>
                                        <div className="flex items-center justify-center gap-2 mb-6">
                                            {renderIcon(pendingItem.icon, `w-6 h-6 ${pendingItem.color}`)}
                                            <h3 className="text-lg font-bold text-slate-700">{pendingItem.name}</h3>
                                        </div>
                                        <div className="flex gap-3 mb-6">
                                            <div className="flex-1">
                                                <select value={durHour} onChange={e => setDurHour(Number(e.target.value))} className="custom-select">
                                                    {[0,1,2,3,4,5].map(h => <option key={h} value={h}>{h} ÏãúÍ∞Ñ</option>)}
                                                </select>
                                            </div>
                                            <div className="flex-1">
                                                <select value={durMin} onChange={e => setDurMin(Number(e.target.value))} className="custom-select">
                                                    {[0,10,15,20,30,40,50].map(m => <option key={m} value={m}>{m} Î∂Ñ</option>)}
                                                </select>
                                            </div>
                                        </div>
                                        <button onClick={handleManualSave} className="w-full py-4 rounded-xl bg-slate-800 text-white font-bold text-lg shadow-lg active:scale-95 transition-transform">
                                            Ï†ÑÏÜ°ÌïòÍ∏∞
                                        </button>
                                    </>
                                )}

                                {modalType === 'flow-end' && (
                                    <>
                                        <h3 className="text-lg font-bold text-center text-slate-700 mb-4 font-serif">Focus Complete</h3>
                                        <input 
                                            type="text" 
                                            placeholder="Ïñ¥Îñ§ ÏùºÏóê ÏßëÏ§ëÌñàÎÇòÏöî?" 
                                            value={memo}
                                            onChange={e => setMemo(e.target.value)}
                                            className="w-full p-4 rounded-xl bg-white border border-slate-200 mb-6 font-bold text-slate-700 focus:outline-none focus:border-sky-300"
                                        />
                                        <div className="grid grid-cols-3 gap-3">
                                            <button onClick={() => handleFlowEnd('Sun')} className="p-4 rounded-xl bg-white border border-slate-100 flex flex-col items-center gap-2 shadow-sm active:scale-95">
                                                <Icons.Sun className="w-8 h-8 text-purple-300" />
                                                <span className="text-xs font-bold text-slate-500">Clear</span>
                                            </button>
                                            <button onClick={() => handleFlowEnd('Cloud')} className="p-4 rounded-xl bg-white border border-slate-100 flex flex-col items-center gap-2 shadow-sm active:scale-95">
                                                <Icons.Cloud className="w-8 h-8 text-sky-300" />
                                                <span className="text-xs font-bold text-slate-500">Cloudy</span>
                                            </button>
                                            <button onClick={() => handleFlowEnd('Rain')} className="p-4 rounded-xl bg-white border border-slate-100 flex flex-col items-center gap-2 shadow-sm active:scale-95">
                                                <Icons.Rain className="w-8 h-8 text-slate-400" />
                                                <span className="text-xs font-bold text-slate-500">Heavy</span>
                                            </button>
                                        </div>
                                    </>
                                )}

                                {(modalType === 'wakeup' || modalType === 'bedtime') && (
                                    <>
                                        <h3 className="text-lg font-bold text-center text-slate-700 mb-6 font-serif">
                                            {modalType === 'wakeup' ? 'Wake Up Time' : 'Bed Time'}
                                        </h3>
                                        <div className="flex gap-3 mb-6">
                                            <select value={timeHour} onChange={e => setTimeHour(Number(e.target.value))} className="custom-select">
                                                {Array.from({length:24},(_,i)=>i).map(h => <option key={h} value={h}>{h} Ïãú</option>)}
                                            </select>
                                            <select value={timeMin} onChange={e => setTimeMin(Number(e.target.value))} className="custom-select">
                                                {Array.from({length:12},(_,i)=>i*5).map(m => <option key={m} value={m}>{String(m).padStart(2,'0')} Î∂Ñ</option>)}
                                            </select>
                                        </div>
                                        <button onClick={() => confirmTime(modalType)} className="w-full py-4 rounded-xl bg-slate-800 text-white font-bold text-lg shadow-lg active:scale-95 transition-transform">
                                            ÏãúÍ∞Ñ Í∏∞Î°ù
                                        </button>
                                    </>
                                )}
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

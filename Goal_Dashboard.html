<!DOCTYPE html>
<html lang="ko">
<head>
    <meta name="color-scheme" content="dark light">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Goal Dashboard</title>
    
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: transparent;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }
        
        .widget-container {
    width: 440px;
    background: rgba(255, 255, 255, 0.45);
    backdrop-filter: blur(30px);
    -webkit-backdrop-filter: blur(30px);
    border-radius: 20px;
    border: 1px solid rgba(255, 255, 255, 0.8);
    box-shadow: 0 10px 40px rgba(216, 180, 254, 0.1);

    /* [ìˆ˜ì •] ìƒí•˜ íŒ¨ë”© 16px->12px, ì¢Œìš° ìœ ì§€, ê°„ê²© 8px->6px */
    padding: 12px 20px; 
    gap: 6px; 

    display: flex;
    flex-direction: column;
    color: #334155;
}

        .section-title {
            font-size: 11px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    /* [ìˆ˜ì •] ë§ˆì§„ 8px -> 4px */
    margin-bottom: 4px;
    display: flex;
    align-items: center;
    gap: 6px;
        }

        /* Custom Progress Bar */
        .progress-bg {
            height: 10px;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 99px;
            overflow: hidden;
            position: relative;
        }
        .progress-fill {
            height: 100%;
            border-radius: 99px;
            transition: width 1.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Glass Cards */
        .glass-card {
    background: rgba(255, 255, 255, 0.4);
    border: 1px solid rgba(255, 255, 255, 0.6);
    border-radius: 16px;
    /* [ìˆ˜ì •] íŒ¨ë”© 12px -> 8px, ì¢Œìš° 14pxë¡œ ë¯¸ì„¸ ì¡°ì • */
    padding: 8px 14px;
}
    </style>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        purple: { 300: '#d8b4fe', 100: '#f3e8ff' },
                        sky: { 300: '#7dd3fc', 100: '#e0f2fe' },
                        yellow: { 200: '#fef08a', 100: '#fef9c3' },
                        slate: { 400: '#94a3b8', 50: '#f8fafc' }
                    }
                }
            }
        }
    </script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // â˜… ì›Œì»¤ ì£¼ì†Œë¥¼ ì—¬ê¸°ì— ì…ë ¥í•˜ì„¸ìš”!
        const WORKER_URL = "https://project-worker.moonkelly601.workers.dev"; 

        const GoalWidget = () => {
            const [data, setData] = useState(null);
            const [loading, setLoading] = useState(true);

            useEffect(() => {
                const fetchData = async () => {
                    try {
                        // ì‹¤ì œ ì›Œì»¤ê°€ ì¤€ë¹„ë˜ê¸° ì „ê¹Œì§„ ë”ë¯¸ ë°ì´í„°ë¡œ ì‘ë™í•©ë‹ˆë‹¤.
                        // ì›Œì»¤ ë°°í¬ í›„ ì•„ë˜ fetch ì£¼ì„ì„ í•´ì œí•˜ì„¸ìš”.
                        /*
                        const res = await fetch(WORKER_URL);
                        const json = await res.json();
                        setData(json);
                        */
                       
                        // [ë”ë¯¸ ë°ì´í„°: ì›Œì»¤ ì—°ë™ ì „ í™•ì¸ìš©]
                        setTimeout(() => {
                            setData({
                                goals: {
                                    keywords: ["ì•ˆì „í•œ í™•ì¥", "ì •ì„œì  ë³´í˜¸", "ì‰¬ìš´ ê¾¸ì¤€í•¨"],
                                    monthly: { text: "ë…ì„œ 300p ì™„ë£Œí•˜ê¸°", target: 100 },
                                    weekly: { text: "ì‚°ì±… 3íšŒ ì´ìƒ & ë§¤ì¼ ê¸°ë¡", target: 7 }
                                },
                                progress: {
                                    percent: 65, // ì›”ê°„ ë‹¬ì„±ë¥ 
                                    stats: { readingMinutes: 120, walkCount: 2 }
                                },
                                feedback: "ì´ë²ˆ ì£¼ëŠ” ë…ì„œ ì‹œê°„ì´ ì•„ì£¼ ì•ˆì •ì ì´ì—ìš”. ì£¼ë§ì— ì‚°ì±…ì„ í•œ ë²ˆ ë” ë‹¤ë…€ì˜¤ë©´ ì™„ë²½í•œ ê· í˜•ì´ ë  ê²ƒ ê°™ì•„ìš”.",
                                routine: {
                                    morn: { meal: true, walk: false, hygiene: true },
                                    aft: { meal: true, walk: true, reading: false },
                                    night: { meal: false, walk: false, hygiene: false, record: false }
                                }
                            });
                            setLoading(false);
                        }, 800);
                    } catch (e) {
                        console.error(e);
                        setLoading(false);
                    }
                };
                fetchData();
            }, []);

            if (loading) return <div className="widget-container items-center justify-center opacity-70"><div className="text-sm font-medium text-slate-400">Loading System...</div></div>;
            if (!data) return <div className="widget-container">Error</div>;

            const { goals, progress, feedback } = data;
            
            return (
                <div className="widget-container">
                    
                    {/* 1. Annual Keywords (Purple - Priority 1) */}
                    <div>
                        <div className="section-title text-purple-300">
                            <svg className="w-3.5 h-3.5" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
                            2026 Core Values
                        </div>
                        <div className="flex gap-2">
                            {goals.keywords.map((k, i) => (
                                <div key={i} className="flex-1 bg-purple-100/50 border border-purple-300/30 rounded-xl py-2 px-1 text-center">
                                    <span className="text-[12px] font-bold text-slate-600 word-keep-all block">{k}</span>
                                </div>
                            ))}
                        </div>
                    </div>

                    {/* 2. Monthly Goal (Sky Blue - Priority 2) */}
            <div className="glass-card bg-sky-100/20 border-sky-300/40">
                {/* [ìˆ˜ì •] mb-2 -> mb-1 */}
                <div className="flex justify-between items-end mb-1">
                    <div className="section-title text-sky-300 mb-0">Monthly Objective</div>
                    <span className="text-xl font-bold text-slate-600">{progress.percent}%</span>
                </div>
                {/* [ìˆ˜ì •] mb-3 -> mb-2 */}
                <div className="text-sm font-medium text-slate-700 mb-2">{goals.monthly.text}</div>
                <div className="progress-bg bg-sky-100">
                    <div className="progress-fill bg-sky-300 shadow-[0_0_10px_rgba(125,211,252,0.5)]" style={{ width: `${progress.percent}%` }}></div>
                </div>
            </div>

            {/* 3. Weekly Goal (Yellow - Priority 3) */}
            <div className="glass-card bg-yellow-100/20 border-yellow-200/60">
                    <div className="section-title text-yellow-200/90" style={{ color:'#dcb028' }}>Weekly Focus</div>
                    <div className="flex items-center justify-between">
                    <span className="text-sm font-medium text-slate-700">{goals.weekly.text}</span>
                    <div className="flex gap-1">
                        {[...Array(7)].map((_, i) => (
                            <div key={i} className={`w-2 h-6 rounded-sm ${i < 4 ? 'bg-yellow-200' : 'bg-slate-200/50'}`}></div>
                        ))}
                    </div>
                    </div>
            </div>

            {/* 4. AI Feedback */}
            {/* [ìˆ˜ì •] p-4 -> p-2.5 */}
            <div className="bg-gradient-to-r from-purple-100/40 to-sky-100/40 rounded-xl p-2.5 border border-white/60 flex gap-3 items-start shadow-sm">
                <div className="w-6 h-6 rounded-full bg-white flex-shrink-0 flex items-center justify-center mt-0.5 shadow-sm">
                    <span className="text-[12px]">ğŸ¤–</span>
                </div>
                <p className="text-xs text-slate-600 leading-relaxed font-medium">
                    {feedback}
                </p>
            </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<GoalWidget />);
    </script>
</body>
</html>

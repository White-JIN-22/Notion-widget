<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="robots" content="noindex, nofollow">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Weekly Timetable (Glass v25)</title>
<style>
  body {
    background: #0d0d0d;
    color: #fff;
    font-family: "Inter", "Pretendard", sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    overflow: hidden;
  }

  .timetable {
    display: grid;
    grid-template-columns: 40px repeat(7, 1fr);
    grid-template-rows: 50px repeat(19, 1fr);
    width: 85vw;
    height: 85vh;
    border-radius: 25px;
    background: rgba(30, 30, 30, 0.4);
    backdrop-filter: blur(25px);
    box-shadow: 0 0 40px rgba(0, 0, 0, 0.6);
    overflow: hidden;
    position: relative;
  }

  /* 헤더 영역 */
  .day-header {
    text-align: center;
    font-size: 13px;
    font-weight: 600;
    line-height: 50px;
    border-right: 1px solid rgba(255, 255, 255, 0.08);
    background: linear-gradient(180deg, rgba(255,255,255,0.12) 0%, rgba(255,255,255,0.04) 100%);
  }

  .day-header.today {
    background: linear-gradient(180deg, rgba(255,255,255,0.22) 0%, rgba(255,255,255,0.08) 100%);
    color: #fff;
    box-shadow: 0 0 10px rgba(255,255,255,0.25) inset;
  }

  /* 시간 라벨 */
  .time-label {
    text-align: right;
    padding-right: 6px;
    font-size: 11px;
    color: rgba(255, 255, 255, 0.6);
  }

  .time-label.bold {
    font-weight: 700;
    color: rgba(255, 255, 255, 0.9);
  }

  /* 라인 구분 */
  .grid-line {
    grid-column: 2 / span 7;
    border-top: 1px solid rgba(255, 255, 255, 0.05);
  }

  .grid-line.bold {
    border-top: 1px solid rgba(255, 255, 255, 0.15);
  }

  /* 일정 블록 */
  .event {
    position: absolute;
    left: calc(40px + (var(--day-index) * (100% / 8)));
    width: calc((100% - 40px) / 8 - 6px);
    border-radius: 8px;
    background: var(--event-color, rgba(120, 160, 255, 0.4));
    backdrop-filter: blur(10px);
    transition: all 0.2s ease;
    box-shadow: 0 3px 6px rgba(0,0,0,0.4);
  }

  .event:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 12px rgba(0,0,0,0.6);
  }

  /* 툴팁 */
  .tooltip {
    position: absolute;
    background: rgba(0, 0, 0, 0.8);
    color: #fff;
    font-size: 11px;
    padding: 4px 8px;
    border-radius: 6px;
    white-space: nowrap;
    transform: translate(-50%, -110%);
    opacity: 0;
    transition: opacity 0.2s;
    pointer-events: none;
  }

  .event:hover .tooltip {
    opacity: 1;
  }
</style>
</head>
<body>
  <div class="timetable" id="timetable"></div>

<script>
const timetable = document.getElementById("timetable");
const days = ["MON","TUE","WED","THU","FRI","SAT","SUN"];
const now = new Date();
const todayIndex = (now.getDay() + 6) % 7; // 월=0 기준

// 헤더
timetable.appendChild(document.createElement("div")); // 왼쪽 상단 빈칸
days.forEach((d, i) => {
  const head = document.createElement("div");
  head.className = "day-header" + (i === todayIndex ? " today" : "");
  const date = new Date();
  date.setDate(now.getDate() - todayIndex + i);
  const dateStr = `${String(date.getMonth()+1).padStart(2,"0")}/${String(date.getDate()).padStart(2,"0")}`;
  head.textContent = `${dateStr} ${d}`;
  timetable.appendChild(head);
});

// 시간 라벨과 라인
for (let h = 6; h <= 24; h++) {
  const label = document.createElement("div");
  label.className = "time-label" + ((h===6||h===12||h===18||h===24) ? " bold" : "");
  label.textContent = String(h).padStart(2,"0");
  timetable.appendChild(label);

  const line = document.createElement("div");
  line.className = "grid-line" + ((h===6||h===12||h===18||h===24) ? " bold" : "");
  timetable.appendChild(line);
}

// 예시 이벤트 (실제 iCloud fetch로 대체됨)
const sampleEvents = [
  { title: "자기계발입니다", start: "2025-12-02T11:00:00+09:00", end: "2025-12-02T12:00:00+09:00", color: "rgba(160,180,255,0.5)" },
  { title: "심리상담", start: "2025-12-02T14:00:00+09:00", end: "2025-12-02T15:00:00+09:00", color: "rgba(255,180,150,0.45)" },
  { title: "업무입니다", start: "2025-12-02T16:20:00+09:00", end: "2025-12-02T17:20:00+09:00", color: "rgba(150,200,255,0.45)" },
  { title: "휴식", start: "2025-12-03T23:00:00+09:00", end: "2025-12-03T23:55:00+09:00", color: "rgba(180,255,180,0.4)" }
];

// 이벤트 렌더
sampleEvents.forEach(ev => {
  const s = new Date(ev.start);
  const e = new Date(ev.end);
  const dayIndex = (s.getDay() + 6) % 7;
  const startHour = s.getHours() + s.getMinutes()/60;
  const endHour = e.getHours() + e.getMinutes()/60;
  const top = ((startHour - 6) / 18) * 100;
  const height = ((endHour - startHour) / 18) * 100;

  const block = document.createElement("div");
  block.className = "event";
  block.style.setProperty("--day-index", dayIndex);
  block.style.top = `${top}%`;
  block.style.height = `${height}%`;
  block.style.setProperty("--event-color", ev.color);

  const tooltip = document.createElement("div");
  tooltip.className = "tooltip";
  tooltip.textContent = `${s.getHours().toString().padStart(2,"0")}:${s.getMinutes().toString().padStart(2,"0")} ~ ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}  ${ev.title}`;
  block.appendChild(tooltip);

  timetable.appendChild(block);
});
</script>
</body>
</html>

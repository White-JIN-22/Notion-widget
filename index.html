<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jinsol Focus Widget</title>
    
    <meta name="robots" content="noindex, nofollow">
    <meta name="googlebot" content="noindex, nofollow">
    <meta name="bingbot" content="noindex, nofollow">

    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #f8fafc;
        }
        /* Î∂ÄÎìúÎü¨Ïö¥ Ï†ÑÌôò Ìö®Í≥º */
        .card-transition {
            transition: all 0.5s cubic-bezier(0.25, 1, 0.5, 1);
        }
        .fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen">

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // ÏïÑÏù¥ÏΩò Ïª¥Ìè¨ÎÑåÌä∏ (Lucide ÏïÑÏù¥ÏΩò ÎåÄÏ≤¥)
        const IconZap = () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></svg>;
        const IconArrowUp = () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="12" y1="19" x2="12" y2="5"></line><polyline points="5 12 12 5 19 12"></polyline></svg>;
        const IconCoffee = () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 8h1a4 4 0 0 1 0 8h-1"></path><path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"></path><line x1="6" y1="1" x2="6" y2="4"></line><line x1="10" y1="1" x2="10" y2="4"></line><line x1="14" y1="1" x2="14" y2="4"></line></svg>;
        const IconCheck = () => <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>;
        const IconRefresh = () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg>;

        const PHASES = {
            START: {
                id: 'start',
                duration: 5 * 60, 
                color: 'bg-[#C9B8FF]', 
                textColor: 'text-purple-900',
                title: '5-minute ignition',
                subtext: 'Start while standing',
                icon: <IconZap />
            },
            EXTENSION: {
                id: 'extension',
                duration: 5 * 60, 
                color: 'bg-[#E4E0F2]', 
                textColor: 'text-gray-700',
                title: 'Extend focus?',
                subtext: 'Optional step',
                icon: <IconArrowUp />
            },
            TRANSITION: {
                id: 'transition',
                duration: 10 * 60, 
                color: 'bg-[#C8F1EF]', 
                textColor: 'text-teal-900',
                title: 'Transition Routine',
                subtext: 'Mandatory Rest',
                icon: <IconCoffee />
            }
        };

        const FocusWidget = () => {
            const [currentPhase, setCurrentPhase] = useState('start');
            const [timeLeft, setTimeLeft] = useState(PHASES.START.duration);
            const [isActive, setIsActive] = useState(false);
            const [showExtensionChoice, setShowExtensionChoice] = useState(false);
            const [isFinished, setIsFinished] = useState(false);

            useEffect(() => {
                let interval = null;
                if (isActive && timeLeft > 0) {
                    interval = setInterval(() => {
                        setTimeLeft((time) => time - 1);
                    }, 1000);
                } else if (timeLeft === 0 && isActive) {
                    setIsActive(false);
                    handlePhaseComplete();
                }
                return () => clearInterval(interval);
            }, [isActive, timeLeft]);

            const handlePhaseComplete = () => {
                if (currentPhase === 'start') {
                    setShowExtensionChoice(true);
                } else if (currentPhase === 'extension') {
                    startTransition();
                } else if (currentPhase === 'transition') {
                    setIsFinished(true);
                }
            };

            const startTransition = () => {
                setCurrentPhase('transition');
                setTimeLeft(PHASES.TRANSITION.duration);
                setIsActive(true);
                setShowExtensionChoice(false);
            };

            const startExtension = () => {
                setCurrentPhase('extension');
                setTimeLeft(PHASES.EXTENSION.duration);
                setIsActive(true);
                setShowExtensionChoice(false);
            };

            const resetAll = () => {
                setCurrentPhase('start');
                setTimeLeft(PHASES.START.duration);
                setIsActive(false);
                setIsFinished(false);
                setShowExtensionChoice(false);
            };

            const formatTime = (seconds) => {
                const m = Math.floor(seconds / 60).toString().padStart(2, '0');
                const s = (seconds % 60).toString().padStart(2, '0');
                return `${m}:${s}`;
            };

            const currentData = PHASES[currentPhase.toUpperCase()];

            return (
                <div className="relative w-80 h-96 flex flex-col items-center justify-center">
                    
                    {/* Î∞∞Í≤Ω Ïä§ÌÉù (Ïû•Ïãù) */}
                    <div className="absolute top-4 w-72 h-80 bg-[#E4E0F2] rounded-3xl opacity-60 transform scale-95 translate-y-2 shadow-sm transition-all duration-500"></div>
                    <div className="absolute top-8 w-72 h-80 bg-[#C8F1EF] rounded-3xl opacity-40 transform scale-90 translate-y-4 shadow-sm transition-all duration-500"></div>

                    {!isFinished ? (
                        <div className={`relative z-10 w-72 h-auto min-h-[340px] p-6 rounded-3xl shadow-xl flex flex-col justify-between card-transition ${currentData.color} ${currentData.textColor} fade-in`}>
                            {/* Ìó§Îçî */}
                            <div className="flex items-center justify-between opacity-80">
                                <span className="text-sm font-medium tracking-wide uppercase">
                                    {currentPhase === 'start' ? 'Step 1' : currentPhase === 'extension' ? 'Step 2' : 'Step 3'}
                                </span>
                                {currentData.icon}
                            </div>

                            {/* ÌÉÄÏù¥Î®∏ & ÌÖçÏä§Ìä∏ */}
                            <div className="flex flex-col items-center py-4">
                                <h1 className="text-5xl font-light tracking-tight mb-2">
                                    {formatTime(timeLeft)}
                                </h1>
                                <h2 className="text-lg font-medium">
                                    {currentData.title}
                                </h2>
                                <p className="text-sm opacity-70 mt-1">
                                    {currentData.subtext}
                                </p>
                            </div>

                            {/* Î≤ÑÌäº ÏòÅÏó≠ */}
                            <div className="mt-4">
                                {!showExtensionChoice && (
                                    currentPhase === 'transition' ? (
                                        <div className="space-y-2 text-sm">
                                            <div className="flex items-center gap-2 opacity-80">üíß Drink water</div>
                                            <div className="flex items-center gap-2 opacity-80">üö∂ Move spots</div>
                                            <div className="flex items-center gap-2 opacity-80">üßò Stretch</div>
                                            <button onClick={() => setIsFinished(true)} className="w-full mt-4 bg-white/30 hover:bg-white/50 py-2 rounded-xl transition-colors">
                                                Done Early
                                            </button>
                                        </div>
                                    ) : (
                                        <button
                                            onClick={() => setIsActive(!isActive)}
                                            className="w-full py-3 bg-white/40 hover:bg-white/60 backdrop-blur-sm rounded-2xl text-lg font-medium transition-all shadow-sm active:scale-95"
                                        >
                                            {isActive ? "Pause" : "Start Focus"}
                                        </button>
                                    )
                                )}

                                {showExtensionChoice && (
                                    <div className="flex flex-col gap-2 fade-in">
                                        <button
                                            onClick={startExtension}
                                            className="w-full py-3 bg-white/60 hover:bg-white/80 rounded-xl font-medium transition-colors flex items-center justify-center gap-2"
                                        >
                                            <IconArrowUp /> Extend +5 min
                                        </button>
                                        <button
                                            onClick={startTransition}
                                            className="w-full py-3 bg-black/5 hover:bg-black/10 rounded-xl font-medium transition-colors text-sm"
                                        >
                                            No, Start Transition (Rest)
                                        </button>
                                    </div>
                                )}
                            </div>
                        </div>
                    ) : (
                        <div className="relative z-10 w-72 h-[340px] bg-white p-6 rounded-3xl shadow-xl flex flex-col items-center justify-center text-center fade-in">
                            <div className="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4 text-green-500">
                                <IconCheck />
                            </div>
                            <h2 className="text-xl font-bold text-gray-800 mb-2">Session Complete</h2>
                            <p className="text-gray-500 text-sm mb-6">You are refreshed and ready.</p>
                            <button
                                onClick={resetAll}
                                className="flex items-center gap-2 px-6 py-3 bg-gray-900 text-white rounded-full hover:bg-gray-700 transition-colors"
                            >
                                <IconRefresh /> Reset Widget
                            </button>
                        </div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<FocusWidget />);
    </script>
</body>
</html>
